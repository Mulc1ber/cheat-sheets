# Введение в TypeSсript

Описание

## tsconfig.json

Как мы уже знаем, для работы с TypeScript в npm-реестре существует специальный пакет — [typescript](https://www.npmjs.com/package/typescript). Для его установки, в качестве зависимости для разработки, необходимо выполнить команду:

```bash
npm install typescript --save-dev
```

После этого с помощью CLI мы можем компилировать TS-файлы:

```bash
npx tsc ./index.ts
```

Но на какие правила в таком случае опирается компилятор? Например, если мы скомпилируем следующий TS-код:

```javascript
const foo = (a: number, b: number): number => {
  return a * b;
};
```

То он станет следующим JS-кодом:

```javascript
var foo = function (a, b) {
  return a * b;
};
```

То есть мы видим, что код преобразовался в более старый стандарт ECMAScript (а именно ES3). Это поведение компилятора по умолчанию, но мы можем им управлять. Для этого нужно передать специальный параметр:

```bash
npx tsc ./index.ts --target es6
```

И теперь код преобразуется в стандарт ES6:

```javascript
const foo = (a, b) => {
  return a * b;
};
```

Как мы видим, этим можно управлять с помощью специальных параметров. На самом деле таких параметров очень много ([ссылка на документацию](https://www.typescriptlang.org/docs/handbook/compiler-options.html)), и указывать все это через консоль довольно неудобно. Если нам необходимо множество параметров= компилятора TypeScript, то намного удобнее записать их в специальный файл — `tsconfig.json.`

### **Файл конфигурации**

Файл `tsconfig.json.` — это файл конфигурации, который позволяет управлять поведением компилятора TypeScript. Он помещается в корень проекта, и компилятор автоматически считывает его при компиляции кода. Файл `tsconfig.json.` написан в формате JSON и содержит несколько свойств, которые настраивают компилятор TypeScript.

Давайте создадим данный файл. Для этого выполняем следующую команду:

```bash
npx tsc --init
```

Эта команда создаст `tsconfig.json.` со стандартными параметрами. Их можно изменять в зависимости от конкретного проекта.

### **Параметры**

Давайте посмотрим на следующий пример файла с основными параметрами и разберем их:

```javascript
{
	"compilerOptions": {
		"target": "es2016",
		"module": "commonjs",
		"allowJs": true,
		"sourceMap": true,
		"outDir": "dist",
		"noEmitOnError": true,
		"esModuleInterop": true,
		"forceConsistentCasingInFileNames": true,
		"strict": true,
	},
	"include": ["src/**/*"],
	"exclude": ["**/*.spec.ts"]
}
```

`"compilerOptions"` — верхнеуровневое свойство, содержащее параметры для компилятора. Это основная часть конфигурации, которая определяет, как должен работать язык. Рекомендуем ознакомиться с несколькими полезными настройками:

| Ключ                               | Описание                                                                                                                                                                                                                                             |
| ---------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `target`                           | указывает версию ECMAScript, в которую будет скомпилирован TypeScript-код. Например, `"es3"`, `"es5"`, `"es6"`, `"es2016"`, `"esnext"` и другие.                                                                                                     |
| `module`                           | указывает, какую систему модулей использовать. Можно указать `"commonjs"`, `"amd"`, `"system"`, `"es2015"`, `"es2020"`, `"esnext"` и другие.                                                                                                         |
| `allowJs`                          | позволяет использовать JavaScript-файлы в TypeScript-проекте. Эта опция может быть полезна, если у нас уже есть проект на JavaScript, и мы хотим его постепенно перевести на TypeScript.                                                             |
| `sourceMap`                        | включает создание [source maps](https://firefox-source-docs.mozilla.org/devtools-user/debugger/how_to/use_a_source_map/index.html#use-a-source-map) для удобства отладки.                                                                            |
| `outDir`                           | задает каталог, в котором должны сохраняться скомпилированные JavaScript-файлы. Если не указывать, то по умолчанию JS-файлы будут сохраняться там же, где их TS-исходники (например, для файла `/src/foo/bar.ts` создастся `/src/foo/bar.js`).       |
| `noEmitOnError`                    | определяет, будет ли TypeScript компилироваться в JavaScript, если в процессе компиляции возникнут ошибки.                                                                                                                                           |
| `esModuleInterop`                  | упрощает работу с импортами CommonJS-модулей.                                                                                                                                                                                                        |
| `forceConsistentCasingInFileNames` | гарантирует, что при импорте будет указан правильный регистр имени файла. Это может помочь предотвратить ошибки при работе с разными операционными системами (чувствительных и нечувствительных к регистру).                                         |
| `strict`                           | включить все параметры строгой проверки типов (такие как `strictBindCallApply`, `strictFunctionTypes`, `strictNullChecks` и другие). Рекомендуется включить, так как это помогает избежать ошибок в коде, улучшить качество и надежность приложений. |

Далее идет `«include»`. Это верхнеуровневое свойство, которое указывает, что должно быть включено в программу (будет скомпилировано). Оно поддерживает шаблоны поиска, т. е. при указании `[«src/**/*»]` будут искаться TS-файлы внутри папки `src`, а также во всех её дочерних папках.

Затем идет верхнеуровневое свойство `"exclude"`. Здесь ровно наоборот — определяем, что из указанного в `"include"` компилятору нужно проигнорировать. Здесь также поддерживаются шаблоны поиска, т. е. при указании `["**/*.spec.ts"]` все файлы, которые оканчиваются на `.spec.ts` компилироваться не будут.

Полный список параметров, а также их подробные описания можно узнать [в документации](https://www.typescriptlang.org/tsconfig).

### **Запуск с использованием файла конфигурации**

После того, как мы настроили файл `tsconfig.json`, нам нужно запустить компиляцию с учетом всех переданных параметров. Для этого выполняем команду:

```bash
npx tsc
```

Эта команда по умолчанию ищет файл `tsconfig.json` в текущем каталоге и использует его для настройки компилятора.

### **Заключение**

Файл `tsconfig.json` — важная часть любого TypeScript-проекта. Он позволяет настраивать компилятор и гарантирует, что все разработчики проекта используют одну и ту же конфигурацию. Понимая суть конфигурационного файла и его основных параметров, ты сможешь настраивать поведение компилятора для своего проекта.
